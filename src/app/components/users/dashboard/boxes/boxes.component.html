<div class="container">
  <div class="row">
     <div class="col-12">
        <div class="justify-content-center">
           <mat-card class="example-card" appearance="outlined" style="max-width: 1200px;">
              <mat-card-header>
                 <mat-card-title-group>
                    <mat-card-title>REGISTER SERVICE</mat-card-title>
                 </mat-card-title-group>
              </mat-card-header>
              <br>
              <mat-card-content>
                 <div style="display: flex; gap: 16px;">
                    <mat-checkbox class="example-margin" (change)="onModelChange($event.checked)" [(ngModel)]="isChecked">Reservation</mat-checkbox>
                    <mat-form-field class="example-full-width">
                       <mat-label>ID RESERVATION</mat-label>
                       <input matInput placeholder="Ex. RV-0000000000" [disabled]="isReadOnlyReservation" [(ngModel)]="idReservation">
                    </mat-form-field>
                    <button class="css-Search" [hidden]="isReadOnlyReservation" (click)="searchReservation()">
                      <mat-icon class="css-filter">search</mat-icon>
                    </button>
                 </div>
                 <div style="display: flex; gap: 16px;">
                    <mat-form-field class="example-full-width">
                       <mat-label>Client</mat-label>
                       <input matInput placeholder="Ex. Suarez Sanchez Mario" [(ngModel)]="nameClient.namesClient" [readonly]="true">
                    </mat-form-field>
                    <button class="css-Search" (click)="openDialog()" [disabled]="!isReadOnlyReservation">                       
                       <mat-icon class="css-filter">add</mat-icon>
                    </button>
                    <button class="css-Search" (click)="openDialogSarchClient()" [disabled]="!isReadOnlyReservation">
                       <mat-icon class="css-filter">search</mat-icon>
                    </button>
                 </div>
                 <div class="container">
                  <div class="row">
                    <div class="col-4">
                     <mat-form-field style="padding: 0%;">
                        <mat-label>Type Service</mat-label>
                        <mat-select [(ngModel)]="selectedValue" name="service" (ngModelChange)="onServiceSelectionChange($event)">
                          <mat-option *ngFor="let service of services" [value]="service.id">{{ service.descriptionService }}</mat-option>
                        </mat-select>                                
                     </mat-form-field>
                    </div>
                    <!-- <div class="col-4">
                     <mat-form-field>
                        <mat-label>prueba</mat-label>
                        <input matInput
       type="text"
       pattern="^\d+(\.\d{1,2})?$"
       placeholder="0.00"
       [(ngModel)]="priceTest"
       #priceInput="ngModel"
       required
      />
      <div *ngIf="priceInput.invalid && (priceInput.dirty || priceInput.touched)">
      <p style="color: red;">El formato debe ser num√©rico con hasta dos decimales.</p>
      </div>
                        <span matTextPrefix>Bs.&nbsp;</span>
                     </mat-form-field>
                    </div> -->

                    <div class="col-4">
                     <mat-form-field>
                        <mat-label>Price</mat-label>
                        <input matInput type="text" pattern="^\d+(\.\d{1,2})?$" class="example-right-align" placeholder="0.00" [(ngModel)]="price"/>
                        <span matTextPrefix>Bs.&nbsp;</span>
                     </mat-form-field>
                    </div>
                    <div class="col-4">
                     <mat-form-field>
                        <mat-label>Qty</mat-label>
                        <input matInput type="text" pattern="^\d+(\.\d{1,2})?$" class="example-right-align" placeholder="Ex. 1" [(ngModel)]="qty"/>
                     </mat-form-field>
                    </div>
                    <div class="col-4">
                     <mat-form-field>
                        <mat-label>Discount</mat-label>
                        <input matInput type="text" class="example-right-align" placeholder="Ex. 10" [(ngModel)]="discount">
                        <span matTextSuffix>&nbsp;%</span>
                     </mat-form-field>
                     </div>
                     <div class="col-4">
                        <button class="css-Search" (click)="addItem()">
                           <mat-icon class="css-filter">add_shopping_cart</mat-icon>
                         </button>
                     </div>
                  </div>
                </div>                        
              </mat-card-content>
              <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
                
                <ng-container matColumnDef="guid">
                  <th mat-header-cell *matHeaderCellDef hidden="true"> </th>
                  <td mat-cell *matCellDef="let element" hidden="true"> {{element.guid}} </td>
                </ng-container>

                <ng-container matColumnDef="deleteEmployee">
                  <th mat-header-cell *matHeaderCellDef> Delete </th>
                  <td mat-cell *matCellDef="let element">
                    <button mat-button style="color: red;" (click)="eliminarFila(element)"><i class="fas fa-trash"></i></button>                    
                  </td>
                </ng-container>
                
                <ng-container matColumnDef="idTypeService">
                  <th mat-header-cell *matHeaderCellDef> Id Service </th>
                  <td mat-cell *matCellDef="let element"> {{element.idTypeService}} </td>
                </ng-container>

                <ng-container matColumnDef="typeService">
                  <th mat-header-cell *matHeaderCellDef> Type Service </th>
                  <td mat-cell *matCellDef="let element"> {{element.typeService}} </td>
                </ng-container>
              
                <!-- Weight Column -->
                <ng-container matColumnDef="price">
                  <th mat-header-cell *matHeaderCellDef> Price </th>
                  <td mat-cell *matCellDef="let element"> {{element.price}} </td>
                </ng-container>
              
                <!-- Symbol Column -->
                <ng-container matColumnDef="qty">
                  <th mat-header-cell *matHeaderCellDef> Qty </th>
                  <td mat-cell *matCellDef="let element"> {{element.qty}} </td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="discount">
                  <th mat-header-cell *matHeaderCellDef> Discount </th>
                  <td mat-cell *matCellDef="let element"> {{element.discount}} </td>
                </ng-container>

                
                <ng-container matColumnDef="subTotal">
                  <th mat-header-cell *matHeaderCellDef> Sub Total </th>
                  <td mat-cell *matCellDef="let element"> {{element.subTotal}} </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>              
              </table>
              <br>
              <div class="container">
               <div class="row align-items-center">
                  <div class="col">
                     <mat-form-field>
                        <mat-label>TOTAL</mat-label>
                        <input matInput type="text" class="example-right-align" placeholder="0.00" [(ngModel)]="totalValue" readonly="true">
                        <span matTextPrefix>Bs.&nbsp;</span>
                     </mat-form-field>                  
                  </div>
                  <div class="col">
                     <mat-form-field>
                        <mat-label>Cash</mat-label>
                        <input matInput type="text" class="example-right-align" placeholder="Ex. 100.00" [(ngModel)]="cashAmount" (blur)="validateChange()">
                        <span matTextPrefix>Bs.&nbsp;</span>
                     </mat-form-field>                  
                  </div>
                  <div class="col">
                     <mat-form-field>
                        <mat-label>Change</mat-label>
                        <input matInput type="text" class="example-right-align" placeholder="Ex. 100.00" [(ngModel)]="changeAmount" readonly="true">
                        <span matTextPrefix>Bs.&nbsp;</span>
                     </mat-form-field>                  
                  </div>
                </div>               
              </div>             
              <mat-card-actions>
                 <button mat-stroked-button (click)="registerTransaction()" >REGISTER</button>
                 <button mat-stroked-button (click)="clearFields()" >
                  <i class="fas fa-broom"></i> CLEAN
                  </button>                  
              </mat-card-actions>
           </mat-card>
        </div>
     </div>
  </div>
</div>